# Career Guidance API

A FastAPI-based backend for interactive career guidance, powered by AI and MongoDB. Users answer a series of questions, and the system provides personalized career recommendations using an AI model.

---

## Features
- **Session-based Q&A:** Users start a session and answer a series of career-related questions.
- **Persistent Storage:** All sessions and answers are stored in MongoDB.
- **AI Recommendations:** After answering, users receive tailored career path suggestions generated by an AI model (OpenAI-compatible, via OpenRouter).
- **Rate Limiting:** Built-in rate limiting to protect against abuse and manage API costs.
- **RESTful API:** Clean, documented endpoints with interactive Swagger UI (`/docs`).

---

## Project Structure
```
app/
  app.py                # Main FastAPI app and endpoints
  load_questions.py     # Script to load/reset questions in MongoDB
  questions.json        # Source of career guidance questions
  models/
    answer.py           # Pydantic model for answer submissions
  routers/
    answers.py          # Endpoints for submitting answers
    sessions.py         # Endpoints for session and question management
  services/
    ai_service.py       # AI recommendation logic
    db.py               # Database connection logic
```

---

## Setup Instructions

### 1. Clone the Repository
```sh
git clone <your-repo-url>
cd career-guidance-project
```

### 2. Install Dependencies
```sh
pip install -r requirements.txt
```

### 3. Environment Variables
Create a `.env` file in the root directory with the following:
```
MONGO_URL=<your-mongodb-connection-string>
OPENROUTER_API_KEY=<your-openrouter-api-key>
```
- `MONGO_URL`: MongoDB connection string (Atlas or local)
- `OPENROUTER_API_KEY`: API key for OpenRouter (for AI recommendations)

### 4. Load Questions into MongoDB
```sh
python app/load_questions.py
```
This will clear and reload the questions collection in your database.

### 5. Run the FastAPI App
```sh
uvicorn app.app:app --reload
```
Visit [http://localhost:8000/docs](http://localhost:8000/docs) for the interactive API docs.

### 6. Test Rate Limits (Optional)
```sh
python test_rate_limits.py
```
This will test if the rate limiting is working correctly.

---

## API Usage

### Start a Session
```
POST /session
```
Response:
```
{
  "session_id": "...",
  "question_number": 1,
  "question": "..."
}
```

### Get Next Question
```
GET /question?session_id=...
```
Response:
```
{
  "question_number": 2,
  "question": "..."
}
```

### Submit an Answer
```
POST /answer
{
  "session_id": "...",
  "answer": "I like science and math."
}
```
Response:
```
{ "status": "Answer recorded" }
```

### Get Career Recommendations
```
GET /recommend?session_id=...
```
Response:
```
{
  "recommendations": "...AI-generated career advice..."
}
```

### Reset a Session
```
POST /reset?session_id=...
```
Response:
```
{ "status": "Session reset." }
```

---

## Rate Limits

The API implements rate limiting to protect against abuse and manage costs:

- **Root endpoint (`/`)**: 30 requests per minute per IP
- **Session creation (`POST /session`)**: 20 requests per minute per IP  
- **Get questions (`GET /question`)**: 60 requests per minute per IP
- **Submit answers (`POST /answer`)**: 30 requests per minute per IP
- **AI recommendations (`GET /recommend`)**: 10 requests per minute per IP (strictest due to AI costs)
- **Reset sessions (`POST /reset`)**: 10 requests per minute per IP

When rate limits are exceeded, the API returns a `429 Too Many Requests` status code.

---

## Testing

You can test the API interactively using the built-in Swagger UI:

1. Start the FastAPI app:
   ```sh
   uvicorn app.app:app --reload
   ```
2. Open your browser and go to [http://localhost:8000/docs](http://localhost:8000/docs)
3. Use the interactive interface to try out all endpoints, submit answers, and get recommendations.

---

## Credits
- Built with [FastAPI](https://fastapi.tiangolo.com/)
- AI powered by [OpenRouter](https://openrouter.ai/) and [OpenAI](https://openai.com/)
- Database: [MongoDB Atlas](https://www.mongodb.com/atlas)

---

## License
See [LICENSE](LICENSE).
